<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Study Assistant</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'unsafe-eval' 'unsafe-inline'; style-src 'self' 'unsafe-inline'; img-src 'self' data:; connect-src 'self' http://127.0.0.1:5000; font-src 'self';">
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="logo">ğŸ“</div>
            <h1>UniStudy AI</h1>
            <div class="tagline">Your Universal Academic Companion</div>
            <div class="subtitle">Department-agnostic AI study assistant for university students</div>
        </div>

        <div class="department-selector card">
            <div class="card-title">
                ğŸ« Select Your Department/Field of Study
            </div>
            <div class="department-grid">
                <div class="department-card" data-dept="engineering">
                    <div class="department-icon">âš™ï¸</div>
                    <div class="department-name">Engineering</div>
                    <div class="department-desc">Mechanical, Civil, Electrical, Chemical</div>
                </div>
                <div class="department-card" data-dept="computer-science">
                    <div class="department-icon">ğŸ’»</div>
                    <div class="department-name">Computer Science</div>
                    <div class="department-desc">Programming, AI/ML, Data Science</div>
                </div>
                <div class="department-card" data-dept="medicine">
                    <div class="department-icon">ğŸ©º</div>
                    <div class="department-name">Medicine</div>
                    <div class="department-desc">Anatomy, Physiology, Clinical Studies</div>
                </div>
                <div class="department-card" data-dept="business">
                    <div class="department-icon">ğŸ’¼</div>
                    <div class="department-name">Business</div>
                    <div class="department-desc">Finance, Marketing, Management, Economics</div>
                </div>
                <div class="department-card" data-dept="arts-humanities">
                    <div class="department-icon">ğŸ¨</div>
                    <div class="department-name">Arts & Humanities</div>
                    <div class="department-desc">Literature, History, Philosophy, Fine Arts</div>
                </div>
                <div class="department-card" data-dept="science">
                    <div class="department-icon">ğŸ”¬</div>
                    <div class="department-name">Science</div>
                    <div class="department-desc">Biology, Chemistry, Physics, Mathematics</div>
                </div>
                <div class="department-card" data-dept="law">
                    <div class="department-icon">âš–ï¸</div>
                    <div class="department-name">Law</div>
                    <div class="department-desc">Constitutional, Criminal, International Law</div>
                </div>
                <div class="department-card" data-dept="education">
                    <div class="department-icon">ğŸ</div>
                    <div class="department-name">Education</div>
                    <div class="department-desc">Pedagogy, Curriculum Design, Educational Psych</div>
                </div>
            </div>
            <div class="current-selection">
                Selected Department: <span id="selectedDepartmentDisplay">General</span>
            </div>
        </div>

        <div class="main-content">
            <div class="left-panel card">
                <div class="card-title">
                    ğŸ“š Upload Your Study Materials (PDF)
                </div>
                <div class="file-upload-area">
                    <input type="file" id="fileInput" accept=".pdf" multiple>
                    <label for="fileInput" class="upload-button">Choose PDF Files</label>
                    <button id="uploadButton" class="action-button">Upload & Process</button>
                </div>
                <div id="fileList" class="file-list">
                    <p class="empty-message" id="emptyFileMessage">No documents uploaded yet.</p>
                </div>
                <div class="action-buttons">
                    <button id="summarizeAllButton" class="action-button">Summarize All Documents</button>
                    <button id="clearAllDocuments" class="action-button secondary-button">Clear All Documents</button>
                </div>

                <div class="card-title mt-4">
                    ğŸ§  Built-in Resources
                </div>
                <div class="resources-container" id="resourcesContainer">
                    <p class="empty-message">Select a department to view resources.</p>
                </div>
                <div class="action-buttons">
                    <button id="clearResourceContent" class="action-button secondary-button">Clear Resource Content</button>
                </div>
            </div>

            <div class="right-panel card">
                <div class="card-title">
                    ğŸ’¬ Ask UniStudy AI
                </div>
                <div class="chat-input-area">
                    <input type="text" id="questionInput" placeholder="Ask a question about your materials...">
                    <button id="askButton" class="action-button">Ask AI</button>
                </div>
                <div class="action-buttons">
                    <button id="saveChatButton" class="action-button secondary-button">Save Current Chat</button>
                    <button id="clearChatButton" class="action-button secondary-button">Clear Chat</button>
                </div>
                
                <div class="answer-section">
                    <div class="chat-history" id="chatHistory">
                        <div class="ai-message">
                            <div class="message-header">
                                <span>ğŸ¤–</span>
                                <span>AI Assistant</span>
                            </div>
                            <div class="message-content">
                                <p>ğŸ‘‹ Welcome to UniStudy AI! I'm your department-agnostic study assistant.</p>
                                <p><strong>Here's how I can help you:</strong></p>
                                <ul style="margin: 10px 0; padding-left: 20px;">
                                    <li>ğŸ“– Answer questions from your uploaded materials</li>
                                    <li>ğŸ“ Create summaries and study guides</li>
                                    <li>ğŸ” Find specific information across multiple documents</li>
                                    <li>ğŸ’¡ Explain complex concepts in simple terms</li>
                                    <li>ğŸ“Š Analyze patterns in your study materials</li>
                                </ul>
                                <p>Select your department above and upload your study materials to get started!</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="footer card">
            <div class="card-title">
                ğŸ“Š Library & Usage Stats
            </div>
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-number" id="documentCount">0</div>
                    <div class="stat-label">Documents Uploaded</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="questionAnsweredCount">0</div>
                    <div class="stat-label">Questions Answered</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="savedItemsCount">0</div>
                    <div class="stat-label">Saved Items</div>
                </div>
            </div>
            <div class="saved-questions-section mt-4">
                <div class="card-title">
                    â­ Saved Questions & Answers
                </div>
                <ul id="savedQuestionsList" class="saved-list">
                    <p class="empty-message" id="emptySavedMessage">No saved questions yet.</p>
                </ul>
            </div>
        </div>
    </div>

    <script src="{{ url_for('static', filename='script.js') }}"></script>
</body>
</html>